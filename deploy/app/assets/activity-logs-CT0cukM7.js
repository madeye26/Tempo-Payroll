import{f as ae,r as s,j as e,a7 as te,B as o,w as N,C as _,L as p,S as P,n as E,p as T,q as V,v as c,A as K,F as k,G as A,H as I,J as B,K as z,d as ce,m as de}from"./index-DCzl8a2M.js";import{D as se}from"./data-table-Dyk-SJUO.js";import{D as me}from"./data-export-B_YVDYlb.js";import{R as oe}from"./refresh-cw-B6-TPpno.js";/**
 * @license lucide-react v0.394.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=ae("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);function fe(){const[u,G]=s.useState([]),[v,J]=s.useState(0),[R,y]=s.useState(!0),[l,w]=s.useState(1),[i]=s.useState(20),[x,H]=s.useState(""),[r,S]=s.useState(""),[f,L]=s.useState(""),[b,C]=s.useState(void 0),[n,F]=s.useState(void 0),[h,M]=s.useState(!1),g=async()=>{y(!0);try{let t=JSON.parse(localStorage.getItem("activity_logs")||"[]");x&&(t=t.filter(d=>d.user_id===x)),r&&(t=t.filter(d=>d.type===r)),f&&(t=t.filter(d=>d.action===f)),b&&(t=t.filter(d=>new Date(d.created_at)>=b)),n&&(t=t.filter(d=>new Date(d.created_at)<=n)),t.sort((d,m)=>new Date(m.created_at).getTime()-new Date(d.created_at).getTime());const j=t.length,D=(l-1)*i,Q=D+i,X=t.slice(D,Q),Y=JSON.parse(localStorage.getItem("users")||"[]"),Z=X.map(d=>{const m=Y.find(ee=>ee.id===d.user_id);return{...d,user_name:(m==null?void 0:m.name)||"غير معروف",user_email:(m==null?void 0:m.email)||"غير معروف"}});G(Z),J(j)}catch(a){console.error("Error fetching activity logs:",a)}finally{y(!1)}};s.useEffect(()=>{g();const a=()=>{g()};return window.addEventListener("activity-logged",a),()=>{window.removeEventListener("activity-logged",a)}},[l,i,x,r,f,b,n]);const O=()=>{H(""),S(""),L(""),C(void 0),F(void 0)},U=a=>{switch(a){case"auth":return"تسجيل الدخول";case"employee":return"الموظفين";case"salary":return"الرواتب";case"advance":return"السلف";case"attendance":return"الحضور";case"report":return"التقارير";case"setting":return"الإعدادات";default:return a}},$=a=>{switch(a){case"create":return"إنشاء";case"update":return"تعديل";case"delete":return"حذف";case"view":return"عرض";case"login":return"تسجيل دخول";case"logout":return"تسجيل خروج";case"export":return"تصدير";default:return a}},q=a=>{switch(a){case"create":return"bg-green-100 text-green-800";case"update":return"bg-blue-100 text-blue-800";case"delete":return"bg-red-100 text-red-800";case"view":return"bg-gray-100 text-gray-800";case"login":return"bg-purple-100 text-purple-800";case"logout":return"bg-orange-100 text-orange-800";case"export":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},W=[{accessorKey:"created_at",header:"التاريخ والوقت",cell:({row:a})=>{const t=new Date(a.getValue("created_at"));return e.jsxs("div",{className:"tempo-99a0f784-b11d-55ec-b477-e56108958b1a ",tempoelementid:"tempo-99a0f784-b11d-55ec-b477-e56108958b1a",children:[e.jsx("div",{className:"tempo-33009a45-1591-5e29-aca1-50a1d2bc68a8 ",tempoelementid:"tempo-33009a45-1591-5e29-aca1-50a1d2bc68a8",children:t.toLocaleDateString("ar-EG")},"202166097873147025890745949526578874753-2"),e.jsx("div",{className:"text-xs text-muted-foreground tempo-d3983109-9c6e-5b03-b534-e452d6efc9e3",tempoelementid:"tempo-d3983109-9c6e-5b03-b534-e452d6efc9e3",children:t.toLocaleTimeString("ar-EG")},"202166097873147025890745949526578874753-3")]},"202166097873147025890745949526578874753-1")}},{accessorKey:"user_name",header:"المستخدم",cell:({row:a})=>{const t=a.getValue("user_name"),j=a.original.user_email;return e.jsxs("div",{className:"tempo-a0a198fd-957e-552a-8c91-685921f2df2c ",tempoelementid:"tempo-a0a198fd-957e-552a-8c91-685921f2df2c",children:[e.jsx("div",{className:"tempo-d240d456-0da2-57fd-8ff0-163b970f1010 ",tempoelementid:"tempo-d240d456-0da2-57fd-8ff0-163b970f1010",children:t},"202166097873147025890745949526578874753-5"),e.jsx("div",{className:"text-xs text-muted-foreground tempo-0466339a-1022-520a-821f-1fad3e33a072",tempoelementid:"tempo-0466339a-1022-520a-821f-1fad3e33a072",children:j},"202166097873147025890745949526578874753-6")]},"202166097873147025890745949526578874753-4")}},{accessorKey:"type",header:"النوع",cell:({row:a})=>{const t=a.getValue("type");return U(t)}},{accessorKey:"action",header:"الإجراء",cell:({row:a})=>{const t=a.getValue("action");return e.jsx(de,{className:q(t)+" tempo-b6631ce6-291b-58d4-840c-1d123419a9a5",tempoelementid:"tempo-b6631ce6-291b-58d4-840c-1d123419a9a5",children:$(t)})}},{accessorKey:"description",header:"الوصف",cell:({row:a})=>a.getValue("description")}];return e.jsxs("div",{className:"space-y-6 tempo-4c6dbbf5-2975-5748-b80b-2a331da45aa5",dir:"rtl",tempoelementid:"tempo-4c6dbbf5-2975-5748-b80b-2a331da45aa5",children:[e.jsx(te,{title:"سجل النشاطات",description:"عرض وتتبع جميع النشاطات في النظام",actions:e.jsxs(e.Fragment,{children:[e.jsxs(o,{variant:"outline",onClick:()=>M(!h),children:[e.jsx(le,{className:"ml-2 h-4 w-4"}),h?"إخفاء الفلاتر":"عرض الفلاتر"]}),e.jsxs(o,{variant:"outline",onClick:g,children:[e.jsx(oe,{className:"ml-2 h-4 w-4"}),"تحديث"]}),e.jsx(me,{data:u,filename:`activity-logs-${N(new Date,"yyyy-MM-dd")}`})]}),className:"tempo-d8b11c82-942e-5f00-9e1d-bca56f0bcb95 ",tempoelementid:"tempo-d8b11c82-942e-5f00-9e1d-bca56f0bcb95"}),h&&e.jsxs(_,{className:"p-6 tempo-297ac441-eb49-5466-869d-38a005789cfd",tempoelementid:"tempo-297ac441-eb49-5466-869d-38a005789cfd",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 tempo-7a308d44-5b02-52f0-9ad4-99baee6ae6cd",tempoelementid:"tempo-7a308d44-5b02-52f0-9ad4-99baee6ae6cd",children:"فلترة النتائج"},"202166097873147025890745949526578874753-11"),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 tempo-c6a955fa-cd2b-528e-8d3b-de9eaa5c7dd4",tempoelementid:"tempo-c6a955fa-cd2b-528e-8d3b-de9eaa5c7dd4",children:[e.jsxs("div",{className:"space-y-2 tempo-7273bed5-5680-506d-87dc-7bb19160dfcb",tempoelementid:"tempo-7273bed5-5680-506d-87dc-7bb19160dfcb",children:[e.jsx(p,{className:"tempo-e2cae2d4-aaa8-558d-8d3d-f2664ad8ab1c ",tempoelementid:"tempo-e2cae2d4-aaa8-558d-8d3d-f2664ad8ab1c",children:"نوع النشاط"}),e.jsxs(P,{value:r,onValueChange:S,className:"tempo-95f08380-80e8-5e2b-9aec-cd874a3b24b9 ",tempoelementid:"tempo-95f08380-80e8-5e2b-9aec-cd874a3b24b9",children:[e.jsx(E,{className:"tempo-1ae9d9ca-f46b-5c1b-b5cd-d337b9eac038 ",tempoelementid:"tempo-1ae9d9ca-f46b-5c1b-b5cd-d337b9eac038",children:e.jsx(T,{placeholder:"جميع الأنواع",className:"tempo-01a8a61c-2941-513e-848a-2902905f91a9 ",tempoelementid:"tempo-01a8a61c-2941-513e-848a-2902905f91a9"})}),e.jsxs(V,{className:"tempo-b55124e0-98ca-5418-8549-7f8a60ada858 ",tempoelementid:"tempo-b55124e0-98ca-5418-8549-7f8a60ada858",children:[e.jsx(c,{value:"",className:"tempo-9cf627d7-8e09-55c3-ae1c-d19092954e42 ",tempoelementid:"tempo-9cf627d7-8e09-55c3-ae1c-d19092954e42",children:"جميع الأنواع"}),e.jsx(c,{value:"auth",className:"tempo-0c353c41-1f9f-57f6-92c7-0f982d420abc ",tempoelementid:"tempo-0c353c41-1f9f-57f6-92c7-0f982d420abc",children:"تسجيل الدخول"}),e.jsx(c,{value:"employee",className:"tempo-bca9fefb-c3e7-5d43-be58-6bf682803572 ",tempoelementid:"tempo-bca9fefb-c3e7-5d43-be58-6bf682803572",children:"الموظفين"}),e.jsx(c,{value:"salary",className:"tempo-10861732-522a-50dc-bd06-b88180a2df8f ",tempoelementid:"tempo-10861732-522a-50dc-bd06-b88180a2df8f",children:"الرواتب"}),e.jsx(c,{value:"advance",className:"tempo-d30f9e50-ff0d-5b26-823f-7c6e6f1c27fc ",tempoelementid:"tempo-d30f9e50-ff0d-5b26-823f-7c6e6f1c27fc",children:"السلف"}),e.jsx(c,{value:"attendance",className:"tempo-1ba89700-e737-530c-b0d2-e3da2f74f3cf ",tempoelementid:"tempo-1ba89700-e737-530c-b0d2-e3da2f74f3cf",children:"الحضور"}),e.jsx(c,{value:"report",className:"tempo-fc3b8ef7-9f13-5b05-be87-443e8a11648d ",tempoelementid:"tempo-fc3b8ef7-9f13-5b05-be87-443e8a11648d",children:"التقارير"}),e.jsx(c,{value:"setting",className:"tempo-64d35678-8747-54b0-92d0-e47e331b6e70 ",tempoelementid:"tempo-64d35678-8747-54b0-92d0-e47e331b6e70",children:"الإعدادات"})]})]})]},"202166097873147025890745949526578874753-13"),e.jsxs("div",{className:"space-y-2 tempo-3b6ae6ef-4877-5af6-b2d9-5baaa34552fa",tempoelementid:"tempo-3b6ae6ef-4877-5af6-b2d9-5baaa34552fa",children:[e.jsx(p,{className:"tempo-9b14cfd4-71e4-52ab-bc86-d5e9386d0fa9 ",tempoelementid:"tempo-9b14cfd4-71e4-52ab-bc86-d5e9386d0fa9",children:"الإجراء"}),e.jsxs(P,{value:f,onValueChange:L,className:"tempo-e0930ede-d213-5b95-a625-dab66332fc6f ",tempoelementid:"tempo-e0930ede-d213-5b95-a625-dab66332fc6f",children:[e.jsx(E,{className:"tempo-ae2631e6-416a-5bb3-94c4-596b9ac28278 ",tempoelementid:"tempo-ae2631e6-416a-5bb3-94c4-596b9ac28278",children:e.jsx(T,{placeholder:"جميع الإجراءات",className:"tempo-fe00f671-a3e0-5213-947c-c8dab0444cad ",tempoelementid:"tempo-fe00f671-a3e0-5213-947c-c8dab0444cad"})}),e.jsxs(V,{className:"tempo-1dbcca40-7585-5072-9419-7fde3ecd38bb ",tempoelementid:"tempo-1dbcca40-7585-5072-9419-7fde3ecd38bb",children:[e.jsx(c,{value:"",className:"tempo-37876097-3d6a-56d2-b7c3-76ddff9ee1dc ",tempoelementid:"tempo-37876097-3d6a-56d2-b7c3-76ddff9ee1dc",children:"جميع الإجراءات"}),e.jsx(c,{value:"create",className:"tempo-a8f56e05-8662-5593-9200-6598730cd540 ",tempoelementid:"tempo-a8f56e05-8662-5593-9200-6598730cd540",children:"إنشاء"}),e.jsx(c,{value:"update",className:"tempo-fc71fa32-885d-52c6-9f6e-9bb1e985bf90 ",tempoelementid:"tempo-fc71fa32-885d-52c6-9f6e-9bb1e985bf90",children:"تعديل"}),e.jsx(c,{value:"delete",className:"tempo-19e9e77b-d285-54f8-b214-f7e90db95a03 ",tempoelementid:"tempo-19e9e77b-d285-54f8-b214-f7e90db95a03",children:"حذف"}),e.jsx(c,{value:"view",className:"tempo-85bc129a-a8d1-59cf-afb6-914ecea31182 ",tempoelementid:"tempo-85bc129a-a8d1-59cf-afb6-914ecea31182",children:"عرض"}),e.jsx(c,{value:"login",className:"tempo-48ad6739-2804-5f4d-a594-8752acbfa129 ",tempoelementid:"tempo-48ad6739-2804-5f4d-a594-8752acbfa129",children:"تسجيل دخول"}),e.jsx(c,{value:"logout",className:"tempo-00d9720f-3842-532c-885e-47fd6a6cee1b ",tempoelementid:"tempo-00d9720f-3842-532c-885e-47fd6a6cee1b",children:"تسجيل خروج"}),e.jsx(c,{value:"export",className:"tempo-689af70c-1fdf-532a-947a-5342701e7f0c ",tempoelementid:"tempo-689af70c-1fdf-532a-947a-5342701e7f0c",children:"تصدير"})]})]})]},"202166097873147025890745949526578874753-27"),e.jsxs("div",{className:"space-y-2 tempo-aea23c62-c8bd-528d-bebe-3b1d770a078e",tempoelementid:"tempo-aea23c62-c8bd-528d-bebe-3b1d770a078e",children:[e.jsx(p,{className:"tempo-00e428d2-f79f-5692-a485-68b0051127b7 ",tempoelementid:"tempo-00e428d2-f79f-5692-a485-68b0051127b7",children:"من تاريخ"}),e.jsxs(K,{className:"tempo-740f8c5b-9922-52a0-88d7-7b2c2803cb6d ",tempoelementid:"tempo-740f8c5b-9922-52a0-88d7-7b2c2803cb6d",children:[e.jsx(k,{asChild:!0,className:"tempo-97ebe73c-f088-594c-99ee-623eae1b98c0 ",tempoelementid:"tempo-97ebe73c-f088-594c-99ee-623eae1b98c0",children:e.jsxs(o,{variant:"outline",className:"w-full justify-start text-right tempo-1007cec8-6c2c-564b-8dab-f59038fa1b70",tempoelementid:"tempo-1007cec8-6c2c-564b-8dab-f59038fa1b70",children:[e.jsx(A,{className:"ml-2 h-4 w-4 tempo-21a95920-bfe8-5fee-8df0-053c2ebe9ede",tempoelementid:"tempo-21a95920-bfe8-5fee-8df0-053c2ebe9ede"}),b?N(b,"PPP",{locale:I}):e.jsx("span",{className:"tempo-0bdda7c7-3c08-55e0-8aa4-c10baa98e0cd ",tempoelementid:"tempo-0bdda7c7-3c08-55e0-8aa4-c10baa98e0cd",children:"اختر تاريخ"},"202166097873147025890745949526578874753-47")]})}),e.jsx(B,{className:"w-auto p-0 tempo-e7ae9773-49d5-5e52-bb74-4a774bb3b3a1",align:"start",tempoelementid:"tempo-e7ae9773-49d5-5e52-bb74-4a774bb3b3a1",children:e.jsx(z,{mode:"single",selected:b,onSelect:C,initialFocus:!0,className:"tempo-3245d3f8-c5fa-57dd-a2db-299f5c95bb4d ",tempoelementid:"tempo-3245d3f8-c5fa-57dd-a2db-299f5c95bb4d"})})]})]},"202166097873147025890745949526578874753-41"),e.jsxs("div",{className:"space-y-2 tempo-f40b980c-be31-5bd3-b301-d1f64ec48e44",tempoelementid:"tempo-f40b980c-be31-5bd3-b301-d1f64ec48e44",children:[e.jsx(p,{className:"tempo-bc635397-b03d-5ead-b469-1ae4950842ee ",tempoelementid:"tempo-bc635397-b03d-5ead-b469-1ae4950842ee",children:"إلى تاريخ"}),e.jsxs(K,{className:"tempo-cb12145e-1067-5ddb-8005-c64ed07caaeb ",tempoelementid:"tempo-cb12145e-1067-5ddb-8005-c64ed07caaeb",children:[e.jsx(k,{asChild:!0,className:"tempo-bd62e8ee-e65d-5f86-b206-7125889fa892 ",tempoelementid:"tempo-bd62e8ee-e65d-5f86-b206-7125889fa892",children:e.jsxs(o,{variant:"outline",className:"w-full justify-start text-right tempo-fb5b4716-ac6a-5527-9de3-4cb01c809270",tempoelementid:"tempo-fb5b4716-ac6a-5527-9de3-4cb01c809270",children:[e.jsx(A,{className:"ml-2 h-4 w-4 tempo-14543ced-7b28-5a2d-aa3a-d54d13d94336",tempoelementid:"tempo-14543ced-7b28-5a2d-aa3a-d54d13d94336"}),n?N(n,"PPP",{locale:I}):e.jsx("span",{className:"tempo-c0e01097-a78f-5044-b894-1c1c3709f370 ",tempoelementid:"tempo-c0e01097-a78f-5044-b894-1c1c3709f370",children:"اختر تاريخ"},"202166097873147025890745949526578874753-56")]})}),e.jsx(B,{className:"w-auto p-0 tempo-84478bf4-c5ee-5d3e-9da1-77606c8924e4",align:"start",tempoelementid:"tempo-84478bf4-c5ee-5d3e-9da1-77606c8924e4",children:e.jsx(z,{mode:"single",selected:n,onSelect:F,initialFocus:!0,className:"tempo-36900261-adf3-5082-932b-88c1fa74adfd ",tempoelementid:"tempo-36900261-adf3-5082-932b-88c1fa74adfd"})})]})]},"202166097873147025890745949526578874753-50")]},"202166097873147025890745949526578874753-12"),e.jsx("div",{className:"flex justify-end mt-4 tempo-1d7fcafb-978e-5673-9e0b-3010b55041eb",tempoelementid:"tempo-1d7fcafb-978e-5673-9e0b-3010b55041eb",children:e.jsx(o,{variant:"outline",onClick:O,className:"tempo-a01c9e6a-b02b-5e17-94e3-fdf079abc32c ",tempoelementid:"tempo-a01c9e6a-b02b-5e17-94e3-fdf079abc32c",children:"مسح الفلاتر"})},"202166097873147025890745949526578874753-59")]}),e.jsxs(_,{className:"p-6 tempo-35c088d9-af19-5abf-824a-571fe4ce4527",tempoelementid:"tempo-35c088d9-af19-5abf-824a-571fe4ce4527",children:[e.jsx("h2",{className:"text-xl font-semibold mb-6 tempo-eee1e434-c9eb-5e2f-8d65-86ba1bd06295",tempoelementid:"tempo-eee1e434-c9eb-5e2f-8d65-86ba1bd06295",children:"سجل النشاطات"},"202166097873147025890745949526578874753-62"),R?e.jsxs("div",{className:"flex justify-center p-8 tempo-7b0d1dec-22a0-5930-8677-ce8b89a39838",tempoelementid:"tempo-7b0d1dec-22a0-5930-8677-ce8b89a39838",children:[e.jsx(ce,{size:"lg",className:"tempo-4c3235b9-c533-5555-8ec1-c2befb5696f5 ",tempoelementid:"tempo-4c3235b9-c533-5555-8ec1-c2befb5696f5"}),e.jsx("span",{className:"mr-2 tempo-5a58b9d0-97d7-5ed7-a040-2a03224d93e2",tempoelementid:"tempo-5a58b9d0-97d7-5ed7-a040-2a03224d93e2",children:"جاري التحميل..."},"202166097873147025890745949526578874753-65")]},"202166097873147025890745949526578874753-63"):u.length>0?e.jsxs(e.Fragment,{children:[e.jsx(se,{columns:W,data:u,searchKey:"description",className:"tempo-13db7bbc-4381-5788-9cfd-ae28af9b5837 ",tempoelementid:"tempo-13db7bbc-4381-5788-9cfd-ae28af9b5837"}),e.jsxs("div",{className:"flex justify-between items-center mt-4 tempo-40e1ef6a-515d-5689-a880-667e8669a4fe",tempoelementid:"tempo-40e1ef6a-515d-5689-a880-667e8669a4fe",children:[e.jsxs("div",{className:"text-sm text-muted-foreground tempo-e5bfc2fa-609d-51c1-b2a3-1c23231c90e4",tempoelementid:"tempo-e5bfc2fa-609d-51c1-b2a3-1c23231c90e4",children:["إجمالي النتائج: ",v]},"202166097873147025890745949526578874753-68"),e.jsxs("div",{className:"flex gap-2 tempo-830daa7f-1c58-533b-bca0-450f0171e6cf",tempoelementid:"tempo-830daa7f-1c58-533b-bca0-450f0171e6cf",children:[e.jsx(o,{variant:"outline",size:"sm",onClick:()=>w(l-1),disabled:l===1,className:"tempo-8a554044-23b1-5de3-b87a-4a772db51634 ",tempoelementid:"tempo-8a554044-23b1-5de3-b87a-4a772db51634",children:"السابق"}),e.jsx(o,{variant:"outline",size:"sm",onClick:()=>w(l+1),disabled:l*i>=v,className:"tempo-20b36d67-114c-5f8f-bf23-bda75ceeac95 ",tempoelementid:"tempo-20b36d67-114c-5f8f-bf23-bda75ceeac95",children:"التالي"})]},"202166097873147025890745949526578874753-69")]},"202166097873147025890745949526578874753-67")]}):e.jsx("div",{className:"text-center py-8 text-muted-foreground tempo-37f0a85e-97d3-55cb-b11d-ddd4b09d89be",tempoelementid:"tempo-37f0a85e-97d3-55cb-b11d-ddd4b09d89be",children:"لا توجد نشاطات مسجلة"},"202166097873147025890745949526578874753-72")]})]},"202166097873147025890745949526578874753-8")}export{fe as default};
