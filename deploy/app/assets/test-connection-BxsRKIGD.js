import{e as o,r as m,j as e,C as r,B as i,d as p}from"./index-DCzl8a2M.js";async function x(){try{if(!o)return{success:!1,message:"Supabase client is not initialized. Check your environment variables."};const{data:t,error:s}=await o.from("users").select("id").limit(1);return s?{success:!1,message:"Failed to connect to Supabase database.",error:s}:{success:!0,message:"Successfully connected to Supabase database.",data:t}}catch(t){return{success:!1,message:`Error testing Supabase connection: ${t instanceof Error?t.message:String(t)}`,error:t}}}async function h(){try{if(!o)return{success:!1,message:"Supabase client is not initialized. Check your environment variables."};const t={name:"موظف اختبار",position:"منصب اختبار",department:"قسم اختبار",base_salary:1e3,monthly_incentives:100,join_date:new Date().toISOString().split("T")[0],status:"active"},{data:s,error:d}=await o.from("employees").insert([t]).select();if(d)return{success:!1,message:"Failed to insert test employee into database.",error:d};if(s&&s.length>0){const{error:c}=await o.from("employees").delete().eq("id",s[0].id);c&&console.warn("Failed to delete test employee:",c)}return{success:!0,message:"Successfully inserted and deleted test employee.",data:s}}catch(t){return{success:!1,message:`Error testing employee insert: ${t instanceof Error?t.message:String(t)}`,error:t}}}function j(){const[t,s]=m.useState(null),[d,c]=m.useState(null),[n,f]=m.useState(!1),[b,g]=m.useState({VITE_SUPABASE_URL:"https://rekffqrqwkeicjifgzjb.supabase.co",VITE_SUPABASE_ANON_KEY:"[Hidden]"});m.useEffect(()=>{l()},[]);const l=async()=>{f(!0);try{const a=await x();s(a)}catch(a){s({success:!1,message:`Error: ${a instanceof Error?a.message:String(a)}`})}finally{f(!1)}},u=async()=>{f(!0);try{const a=await h();c(a)}catch(a){c({success:!1,message:`Error: ${a instanceof Error?a.message:String(a)}`})}finally{f(!1)}};return e.jsxs("div",{className:"space-y-6 tempo-baf0550f-ffd4-5dc3-b54c-fd5a49912815",dir:"rtl",tempoelementid:"tempo-baf0550f-ffd4-5dc3-b54c-fd5a49912815",children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-l from-primary to-primary/70 bg-clip-text text-transparent inline-block tempo-0e7c21d8-e4ff-5efd-bef8-dd504c4d8b55",tempoelementid:"tempo-0e7c21d8-e4ff-5efd-bef8-dd504c4d8b55",children:"اختبار الاتصال بقاعدة البيانات"},"173915204943959522783311934574207962520-2"),e.jsxs(r,{className:"p-6 tempo-70a7c10c-d133-5d3f-870a-586a99f556b5",tempoelementid:"tempo-70a7c10c-d133-5d3f-870a-586a99f556b5",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 tempo-91c3d220-3184-5f1d-b4e9-7ff607ae47fb",tempoelementid:"tempo-91c3d220-3184-5f1d-b4e9-7ff607ae47fb",children:"متغيرات البيئة"},"173915204943959522783311934574207962520-4"),e.jsxs("div",{className:"space-y-2 mb-6 tempo-dc8e10bf-dfd7-5870-8ce6-fa1674855826",tempoelementid:"tempo-dc8e10bf-dfd7-5870-8ce6-fa1674855826",children:[e.jsxs("div",{className:"flex justify-between p-2 bg-muted/20 rounded tempo-650ce0ff-51f3-53ed-b859-a3172b1ccf74",tempoelementid:"tempo-650ce0ff-51f3-53ed-b859-a3172b1ccf74",children:[e.jsx("span",{className:"font-mono tempo-3bab4042-6de1-51b0-8418-939b82296029",tempoelementid:"tempo-3bab4042-6de1-51b0-8418-939b82296029",children:"VITE_SUPABASE_URL"},"173915204943959522783311934574207962520-7"),e.jsx("span",{className:"font-mono tempo-62cd77f3-5704-568d-932c-9a9cec2869d5",tempoelementid:"tempo-62cd77f3-5704-568d-932c-9a9cec2869d5",children:b.VITE_SUPABASE_URL},"173915204943959522783311934574207962520-8")]},"173915204943959522783311934574207962520-6"),e.jsxs("div",{className:"flex justify-between p-2 bg-muted/20 rounded tempo-403dbbbd-8f28-5e6a-9e6e-19fd28b376e3",tempoelementid:"tempo-403dbbbd-8f28-5e6a-9e6e-19fd28b376e3",children:[e.jsx("span",{className:"font-mono tempo-e097462a-4610-5188-a799-e43f43e30927",tempoelementid:"tempo-e097462a-4610-5188-a799-e43f43e30927",children:"VITE_SUPABASE_ANON_KEY"},"173915204943959522783311934574207962520-10"),e.jsx("span",{className:"font-mono tempo-39b7075b-a820-58e3-92ac-2edf82da7ca8",tempoelementid:"tempo-39b7075b-a820-58e3-92ac-2edf82da7ca8",children:b.VITE_SUPABASE_ANON_KEY},"173915204943959522783311934574207962520-11")]},"173915204943959522783311934574207962520-9")]},"173915204943959522783311934574207962520-5"),e.jsxs("div",{className:"flex gap-4 mb-6 tempo-c224b265-7f63-5339-95aa-5c735e64a738",tempoelementid:"tempo-c224b265-7f63-5339-95aa-5c735e64a738",children:[e.jsx(i,{onClick:l,disabled:n,className:"tempo-7417a223-a7b2-5fc5-be22-3b21340ebe88 ",tempoelementid:"tempo-7417a223-a7b2-5fc5-be22-3b21340ebe88",children:n?e.jsxs(e.Fragment,{children:[e.jsx(p,{size:"sm",className:"ml-2 tempo-441bb99e-911e-5c40-8f4f-2e0338c3115b",tempoelementid:"tempo-441bb99e-911e-5c40-8f4f-2e0338c3115b"}),"جاري الاختبار..."]}):"اختبار الاتصال"}),e.jsx(i,{onClick:u,disabled:n,variant:"outline",className:"tempo-e9b8cba9-0045-5dae-b7d4-0e087f482856 ",tempoelementid:"tempo-e9b8cba9-0045-5dae-b7d4-0e087f482856",children:n?e.jsxs(e.Fragment,{children:[e.jsx(p,{size:"sm",className:"ml-2 tempo-af2b7c66-749f-5937-b8fa-d1c3e89f1e05",tempoelementid:"tempo-af2b7c66-749f-5937-b8fa-d1c3e89f1e05"}),"جاري الاختبار..."]}):"اختبار إضافة موظف"})]},"173915204943959522783311934574207962520-12"),t&&e.jsxs("div",{className:`p-4 rounded-md mb-4 ${t.success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"} tempo-6c993622-579a-5e78-a15d-57977c36ce51`,tempoelementid:"tempo-6c993622-579a-5e78-a15d-57977c36ce51",children:[e.jsx("h3",{className:"font-semibold mb-2 tempo-e053d54b-36c0-5b78-9b3e-3f830dd63fe2",tempoelementid:"tempo-e053d54b-36c0-5b78-9b3e-3f830dd63fe2",children:"نتيجة اختبار الاتصال"},"173915204943959522783311934574207962520-18"),e.jsx("p",{className:"tempo-1759c5a4-1dfd-52cd-8c65-010b7558b67a ",tempoelementid:"tempo-1759c5a4-1dfd-52cd-8c65-010b7558b67a",children:t.message},"173915204943959522783311934574207962520-19"),t.error&&e.jsx("pre",{className:"mt-2 p-2 bg-black/10 rounded overflow-auto text-xs tempo-1b7b707c-82d8-5914-93b4-8794239f0565",tempoelementid:"tempo-1b7b707c-82d8-5914-93b4-8794239f0565",children:JSON.stringify(t.error,null,2)},"173915204943959522783311934574207962520-20")]},"173915204943959522783311934574207962520-17"),d&&e.jsxs("div",{className:`p-4 rounded-md ${d.success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"} tempo-cd8bdc51-2106-53b4-9109-3eca0a087b4f`,tempoelementid:"tempo-cd8bdc51-2106-53b4-9109-3eca0a087b4f",children:[e.jsx("h3",{className:"font-semibold mb-2 tempo-efc340a9-eaa7-553a-83be-6287a82ef5d2",tempoelementid:"tempo-efc340a9-eaa7-553a-83be-6287a82ef5d2",children:"نتيجة اختبار الإضافة"},"173915204943959522783311934574207962520-22"),e.jsx("p",{className:"tempo-76d8a89f-2bdb-5fc5-927e-7fd609171802 ",tempoelementid:"tempo-76d8a89f-2bdb-5fc5-927e-7fd609171802",children:d.message},"173915204943959522783311934574207962520-23"),d.data&&e.jsx("pre",{className:"mt-2 p-2 bg-black/10 rounded overflow-auto text-xs tempo-4ab14940-cb79-5224-9046-7c04c2ea8806",tempoelementid:"tempo-4ab14940-cb79-5224-9046-7c04c2ea8806",children:JSON.stringify(d.data,null,2)},"173915204943959522783311934574207962520-24"),d.error&&e.jsx("pre",{className:"mt-2 p-2 bg-black/10 rounded overflow-auto text-xs tempo-f3c49f52-de60-5bb4-b20d-8b37b4cce29f",tempoelementid:"tempo-f3c49f52-de60-5bb4-b20d-8b37b4cce29f",children:JSON.stringify(d.error,null,2)},"173915204943959522783311934574207962520-25")]},"173915204943959522783311934574207962520-21")]}),e.jsxs(r,{className:"p-6 tempo-0852df3d-2fb5-5d71-85e3-a74af2888ebd",tempoelementid:"tempo-0852df3d-2fb5-5d71-85e3-a74af2888ebd",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 tempo-e4e7819c-3f44-5944-bc9a-6dd0620ec0fd",tempoelementid:"tempo-e4e7819c-3f44-5944-bc9a-6dd0620ec0fd",children:"حل مشاكل الاتصال"},"173915204943959522783311934574207962520-27"),e.jsxs("div",{className:"space-y-4 tempo-2439718a-4fa9-531f-9a6f-a6d670a39883",tempoelementid:"tempo-2439718a-4fa9-531f-9a6f-a6d670a39883",children:[e.jsxs("div",{className:"tempo-be442683-f998-524b-b4a6-89d4b051f8ba ",tempoelementid:"tempo-be442683-f998-524b-b4a6-89d4b051f8ba",children:[e.jsx("h3",{className:"font-medium mb-2 tempo-d68a3a9e-3067-5a08-a5fd-ec6392f780cf",tempoelementid:"tempo-d68a3a9e-3067-5a08-a5fd-ec6392f780cf",children:"1. تأكد من تكوين متغيرات البيئة"},"173915204943959522783311934574207962520-30"),e.jsx("p",{className:"text-muted-foreground tempo-da105902-5913-5567-8511-b7227c4f210d",tempoelementid:"tempo-da105902-5913-5567-8511-b7227c4f210d",children:"تأكد من أن متغيرات البيئة VITE_SUPABASE_URL و VITE_SUPABASE_ANON_KEY تم تعيينها بشكل صحيح."},"173915204943959522783311934574207962520-31")]},"173915204943959522783311934574207962520-29"),e.jsxs("div",{className:"tempo-2ba6999f-c7ab-5183-87b7-05d639fa75f3 ",tempoelementid:"tempo-2ba6999f-c7ab-5183-87b7-05d639fa75f3",children:[e.jsx("h3",{className:"font-medium mb-2 tempo-4fc9efe4-7540-5aed-ac73-410cb8ea5492",tempoelementid:"tempo-4fc9efe4-7540-5aed-ac73-410cb8ea5492",children:"2. تأكد من وجود الجداول"},"173915204943959522783311934574207962520-33"),e.jsx("p",{className:"text-muted-foreground tempo-65abfc80-4852-59de-bd25-7ee6a7d190aa",tempoelementid:"tempo-65abfc80-4852-59de-bd25-7ee6a7d190aa",children:"تأكد من أن جدول employees موجود في قاعدة البيانات وأن له الأعمدة الصحيحة."},"173915204943959522783311934574207962520-34")]},"173915204943959522783311934574207962520-32"),e.jsxs("div",{className:"tempo-d1b15e3e-ae0b-5a4f-9c64-8193baad88b5 ",tempoelementid:"tempo-d1b15e3e-ae0b-5a4f-9c64-8193baad88b5",children:[e.jsx("h3",{className:"font-medium mb-2 tempo-46240736-b472-5e05-b863-c87ff7eec8c2",tempoelementid:"tempo-46240736-b472-5e05-b863-c87ff7eec8c2",children:"3. تأكد من صلاحيات الوصول"},"173915204943959522783311934574207962520-36"),e.jsx("p",{className:"text-muted-foreground tempo-7afddf85-8127-506e-9b9d-4b4a5f7b69dc",tempoelementid:"tempo-7afddf85-8127-506e-9b9d-4b4a5f7b69dc",children:"تأكد من أن سياسات RLS تسمح بالإدراج في جدول employees."},"173915204943959522783311934574207962520-37")]},"173915204943959522783311934574207962520-35"),e.jsxs("div",{className:"tempo-a949e26a-8957-5442-bac8-bc9202c3407c ",tempoelementid:"tempo-a949e26a-8957-5442-bac8-bc9202c3407c",children:[e.jsx("h3",{className:"font-medium mb-2 tempo-ddc699f4-d953-5b8e-b94c-6a34743fd943",tempoelementid:"tempo-ddc699f4-d953-5b8e-b94c-6a34743fd943",children:"4. تحقق من سجلات الخطأ"},"173915204943959522783311934574207962520-39"),e.jsx("p",{className:"text-muted-foreground tempo-a2883d56-1332-5fde-b3da-1bb7f1ff8b1a",tempoelementid:"tempo-a2883d56-1332-5fde-b3da-1bb7f1ff8b1a",children:"افتح وحدة تحكم المتصفح للاطلاع على أي أخطاء مفصلة."},"173915204943959522783311934574207962520-40")]},"173915204943959522783311934574207962520-38")]},"173915204943959522783311934574207962520-28")]})]},"173915204943959522783311934574207962520-1")}export{j as default};
